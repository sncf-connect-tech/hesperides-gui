<!--
  ~ /*
  ~  * This file is part of the Hesperides distribution.
  ~  * (https://github.com/voyages-sncf-technologies/hesperides)
  ~  * Copyright (c) 2016 VSCT.
  ~  *
  ~  * Hesperides is free software: you can redistribute it and/or modify
  ~  * it under the terms of the GNU General Public License as
  ~  * published by the Free Software Foundation, version 3.
  ~  *
  ~  * Hesperides is distributed in the hope that it will be useful, but
  ~  * WITHOUT ANY WARRANTY; without even the implied warranty of
  ~  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~  * General Public License for more details.
  ~  *
  ~  * You should have received a copy of the GNU General Public License
  ~  * along with this program. If not, see <http://www.gnu.org/licenses/>.
  ~  */
  ~
  -->

<div class="Navbar">
    <md-toolbar class="md-menu-toolbar">
        <md-menu-bar class="menu layout-wrap" layout="row" layout-align="space-between">
            <div layout="row" class="menu-side">
                <a class="menu-title" href="/">{{ Page.title() }}</a>
                <div class="menu-header"> / {{ 'menu.template.title' | translate }} <i class="fa fa-arrow-right"></i></div>
                <md-menu ng-controller="MenuTechnoController" md-position-mode="target bottom">
                    <button class="menu-header" ng-click="$mdMenu.open()" id="e2e-navbar-techno">
                        {{ 'menu.techno.title' | translate }} <i class="fa fa-caret-down"></i>
                    </button>
                    <md-menu-content class="menu-item">
                        <md-menu-item>
                            <md-button id="e2e-navbar-techno-create" ng-click="open_create_techno_dialog()">
                                {{ 'menu.techno.create' | translate }}
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button id="e2e-navbar-techno-create-from" ng-click="open_create_techno_from_dialog()">
                                {{ 'menu.techno.createFrom' | translate }}
                            </md-button>
                        </md-menu-item>
                        <md-menu-divider></md-menu-divider>
                        <md-menu-item>
                            <md-autocomplete
                                    id="e2e-navbar-techno-autocomplete"
                                    md-no-cache="true"
                                    md-selected-item="ctrl.selectedItem"
                                    md-search-text="ctrl.searchText"
                                    md-items="item in find_technos_by_name(ctrl.searchText)"
                                    md-item-text="item.name"
                                    md-selected-item-change="(item) ? open_techno_page(item.name, item.version, item.is_working_copy) : false"
                                    md-min-length="0"
                                    md-autoselect="true"
                                    placeholder="{{ 'placeholder.search' | translate}}">
                                <span md-highlight-text="ctrl.searchText" ng-show="item.is_working_copy">{{item.name}} {{item.version}} (working copy)</span>
                                <span md-highlight-text="ctrl.searchText" ng-show="!item.is_working_copy">{{item.name}} {{item.version}}</span>
                            </md-autocomplete>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
                <md-menu ng-controller="MenuModuleController" md-position-mode="target bottom">
                    <button class="menu-header" ng-click="$mdMenu.open()" id="e2e-navbar-module">
                        {{ 'menu.module.title' | translate }} <i class="fa fa-caret-down"></i>
                    </button>
                    <md-menu-content class="menu-item">
                        <md-menu-item>
                            <md-button id="e2e-navbar-module-create" ng-click="open_create_module_dialog()">
                                {{ 'menu.module.create' | translate }}
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button id="e2e-navbar-module-create-from" ng-click="open_create_module_from_dialog()">
                                {{ 'menu.module.createFrom' | translate }}
                            </md-button>
                        </md-menu-item>
                        <md-menu-divider></md-menu-divider>
                        <md-menu-item>
                            <md-autocomplete
                                    id="e2e-navbar-module-autocomplete"
                                    md-no-cache="true"
                                    md-selected-item="ctrl.selectedItem"
                                    md-search-text="ctrl.searchText"
                                    md-items="item in find_modules_by_name(ctrl.searchText)"
                                    md-item-text="item.name"
                                    md-selected-item-change="(item) ? open_module_page(item.name, item.version, item.is_working_copy) : false"
                                    md-min-length="0"
                                    md-delay="500"
                                    md-autoselect="true"
                                    placeholder="{{ 'placeholder.search' | translate}}">
                                <span md-highlight-text="ctrl.searchText" ng-show="item.is_working_copy">{{item.name}} {{item.version}} (working copy)</span>
                                <span md-highlight-text="ctrl.searchText" ng-show="!item.is_working_copy">{{item.name}} {{item.version}}</span>
                            </md-autocomplete>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
                <div class="menu-header">{{ 'menu.properties.title' | translate }} <i class="fa fa-arrow-right"></i></div>
                <md-menu ng-controller="MenuPropertiesController" md-position-mode="target bottom">
                    <button class="menu-header" ng-click="$mdMenu.open()" id="e2e-navbar-app">
                        {{ 'menu.platform.title' | translate }} <i class="fa fa-caret-down"></i>
                    </button>
                    <md-menu-content class="menu-item">
                        <md-menu-item>
                            <md-button id="e2e-navbar-app-create" ng-click="open_create_platform_dialog()">
                                {{ 'menu.platform.create' | translate }}
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button id="e2e-navbar-app-create-from" ng-click="open_create_platform_from_dialog()">
                                {{ 'menu.platform.createFrom' | translate }}
                            </md-button>
                        </md-menu-item>
                        <md-menu-divider></md-menu-divider>
                        <md-menu-item>
                            <md-autocomplete
                                    id="e2e-navbar-application-autocomplete"
                                    md-no-cache="true"
                                    md-selected-item="ctrl.selectedItem"
                                    md-search-text="ctrl.searchText"
                                    md-items="item in find_applications_by_name(ctrl.searchText)"
                                    md-item-text="item.name"
                                    md-selected-item-change="item && open_properties_page(item.name)"
                                    md-min-length="0"
                                    md-autoselect="true"
                                    placeholder="{{ 'placeholder.search' | translate}}">
                                <span md-highlight-text="ctrl.searchText">{{item.name}} {{item.version}}</span>
                            </md-autocomplete>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>

            <div layout="row" class="menu-side" ng-controller="MenuHelpController">
                <md-button class="menu-settings" ng-click="display_settings()" id="e2e-navbar-settings">
                    <i class="fa fa-cog" aria-label="{{ 'menu.help.settings' | translate }}"></i>
                </md-button>
                <md-menu md-position-mode="target bottom">
                    <button class="menu-header" ng-click="$mdMenu.open()" id="e2e-navbar-help">
                        {{ 'menu.help.title' | translate}} <i class="fa fa-question"></i>
                    </button>
                    <md-menu-content class="menu-item">
                        <md-menu-item>
                            <md-button ng-click="openDocumentation()">
                                {{ 'menu.help.documentation' | translate}}
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button id="e2e-navbar-help-about" ng-click="openAboutModal()" id="e2e-about-menu">
                                {{ 'menu.help.about' | translate}}
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="supportUrl">
                            <md-button href="{{ supportUrl }}" target="_blank">
                                {{ 'menu.help.support' | translate}}
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
                <button class="menu-header" ng-if="swaggerLink" ng-click="openSwagger()">
                    Swagger
                </button>
                <button class="menu-header" ng-click="navigateToUserPage()">
                    {{ 'menu.link.userPage' | translate}}
                </button>
                <button class="menu-header" ng-click="logout()">
                    {{ 'menu.help.logout' | translate}}
                </button>
                <md-button ng-click="change_language('fr')" class="menu-language--fr" aria-label="{{ 'menu.language.fr.aria' | translate }}" id="e2e-navbar-lang-fr">
                    fr
                </md-button>
                <md-button ng-click="change_language('en')" class="menu-language--en" aria-label="{{ 'menu.language.en.aria' | translate }}" id="e2e-navbar-lang-en">
                    en
                </md-button>
            </div>
        </md-menu-bar>
    </md-toolbar>
</div>
